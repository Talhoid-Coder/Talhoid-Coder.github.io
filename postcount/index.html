<!DOCTYPE html>
<html>
<body>
<p id="count"></p>
<script>

urlParam = function(name){
    var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
    return results[1] || null;
}
try {
	user = urlParam('user')
	badge = urlParam('badge') != null
	var url = 'https://scratchdb.lefty.one/v2/forum/user/info/' + user
} catch(e) {
	alert(e)	
}
try {
	fetch(url).then(response => response.json()).then(data => {
	try {
		var obj = JSON.parse(JSON.stringify(data));
	} catch(e) {
		document.getElementById("count").innerHTML = e;
	}
		if (badge) {
			var json = '{"schemaVersion": 1,"label": "POSTS:","message": ' + obj["counts"]["total"]["count"] + ',"color": "success"}';		
			document.getElementById("count").innerHTML = json;
		} else {
			document.getElementById("count").innerHTML = obj["counts"]["total"]["count"];
		}
	});
} catch(e) {
   document.getElementById("count").innerHTML = e;
}
</script>
</body>
</html>

